# - ------------------------------------------------------------------------ - #
TARGET				:=	obj/_EmbedUpdated
# - ------------------------------------------------------------------------ - #
TreeTool			:=	Tools/TreeTool
LZMA				:=	Tools/lzma

UITool				:=	Tools/UITool
Bin2C				:=	Tools/Bin2C
# - ------------------------------------------------------------------------ - #
Embed_FILES			:=	$(shell $(TreeTool) Art .sc)

IGNORE_LIST			:=	
# - ------------------------------------------------------------------------ - #
Embed_FILES			:=	$(filter-out $(IGNORE_LIST),$(Embed_FILES))
# - ------------------------------------------------------------------------ - #
# To support more ways of adapting files, add them here. #
Embed_FILES			:=	$(Embed_FILES:.sc=.cpp)
# - ------------------------------------------------------------------------ - #
Embed_FILES			:=	$(subst Art/,src/Embed/,$(Embed_FILES))
# - ------------------------------------------------------------------------ - #

# - ------------------------------------------------------------------------ - #
$(TARGET): makedirs $(Embed_FILES)
	@touch $@
# - ------------------------------------------------------------------------ - #

# - ------------------------------------------------------------------------ - #
force:
	touch $(shell $(TreeTool) Art .sc)
# - ------------------------------------------------------------------------ - #
clean:
	-rm -r obj/Embed $(TARGET)
# - ------------------------------------------------------------------------ - #
makedirs:
	mkdir -p $(sort $(dir $(Embed_FILES)) $(subst src/Embed/,obj/Embed/,$(dir $(Embed_FILES))))
# - ------------------------------------------------------------------------ - #
phony: clean makedirs force
# - ------------------------------------------------------------------------ - #

# - ------------------------------------------------------------------------ - #
src/Embed/%.cpp: Art/%.sc
	$(UITool) $< obj/Embed/$*.sc.bin
	$(Bin2C) obj/Embed/$*.sc.bin $@ sc
# - ------------------------------------------------------------------------ - #
